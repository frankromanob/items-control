(()=>{var e={};e.id=786,e.ids=[786],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},97951:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>u});var s=r(67096),i=r(16132),a=r(37284),o=r.n(a),l=r(32564),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let u=["",{children:["admin",{children:["productos",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,91843)),"/Users/altice/RomApps/items-control/src/app/admin/productos/[slug]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9414)),"/Users/altice/RomApps/items-control/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,68056)),"/Users/altice/RomApps/items-control/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/altice/RomApps/items-control/src/app/admin/productos/[slug]/page.tsx"],d="/admin/productos/[slug]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/productos/[slug]/page",pathname:"/admin/productos/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},30041:(e,t,r)=>{Promise.resolve().then(r.bind(r,58037)),Promise.resolve().then(r.bind(r,18914))},70346:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(43058),i=r(53854);let a=(0,s.Z)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},83285:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(43058),i=r(53854);let a=(0,s.Z)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"}),"SaveOutlined")},663:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(83847);let i=s.Z.create({baseURL:"http://localhost:3000/api"}),a=i},18914:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var s=r(53854),i=r(34218),a=r(43058);let o=(0,a.Z)((0,s.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z"}),"UploadOutlined");var l=r(70346),n=r(83285),u=r(21703),c=r(81902),d=r(38770),p=r(62690),m=r(58769),x=r(17444),h=r(91494),g=r(93072),f=r(92747),v=r(90509),b=r(30505),j=r(51018),y=r(663);function Z({producto:e}){let t=(0,j.useRouter)(),{register:r,handleSubmit:a,formState:{errors:Z},getValues:q,setValue:P,watch:w}=(0,f.cI)({defaultValues:e}),C=(0,i.useRef)(null),[T,E]=(0,i.useState)(!1),[_,z]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=w((e,{name:t,type:r})=>{if("title"===t){let t=e.title?.trim().replaceAll(" ","_").replaceAll("'","").toLocaleLowerCase()||"";P("slug",t,{shouldValidate:!0})}});return()=>e.unsubscribe()},[w,P]);let S=async e=>{let t=q("images");P("images",t.filter(t=>t!==e),{shouldValidate:!0})},k=async({target:e})=>{if(e.files&&0!==e.files.length)try{for(let t of e.files){let e=new FormData;e.append("file",t);let{data:r}=await y.Z.post("/uploads",e);P("images",[...q("images"),r.secure_url],{shouldValidate:!0})}}catch(e){console.log(e)}},V=e=>{let t=q("tags");if(t.includes(e))return P("tags",t.filter(t=>t!==e),{shouldValidate:!0})},W=e=>{z("");let t=q("tags");t.includes(e.trim().toLowerCase())||P("tags",[...t,e.trim().toLowerCase()])},A=async e=>{if(e.images.length<1)return alert("Se requiere al menos 1 imagen");E(!0);try{let r=await (0,y.Z)("/products",{method:e._id?"PUT":"POST",data:JSON.stringify(e)});if(E(!1),"OK"!==r.statusText)throw Error(r.statusText);alert("Producto guardado correctamente."),t.replace("/productos")}catch(e){E(!1),alert("Ha ocurrido un error. "+e),console.log(e)}},D=async(e,r)=>{try{let s=await (0,y.Z)("/products",{method:"DELETE",data:JSON.stringify({productId:e,images:r})});if("OK"!==s.statusText&&"OK"!==s.statusText)throw Error(s.statusText);alert("Producto eliminado correctamente"),t.replace("/productos"),t.refresh()}catch(e){E(!1),console.log(e)}};return s.jsx(v.Z,{sx:{display:"flex",flexDirection:"column",m:1},children:s.jsx("form",{name:"productForm",onSubmit:a(A),children:s.jsx(u.ZP,{container:!0,spacing:2,mb:1,children:(0,s.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,s.jsxs)(v.Z,{display:"flex",flexDirection:"column",children:[s.jsx(c.Z,{sx:{mb:1},children:"Im\xe1genes: "}),s.jsx(u.ZP,{container:!0,spacing:2,children:q("images").map(e=>s.jsx(u.ZP,{item:!0,xs:6,sm:3,children:(0,s.jsxs)(d.Z,{children:[s.jsx(p.Z,{component:"img",className:"fadeIn",width:"200",height:"100%",image:`${e}`,alt:e}),s.jsx(m.Z,{children:s.jsx(b.Z,{fullWidth:!0,color:"error",style:{height:"20px",marginTop:"10px"},onClick:()=>S(e),children:"Borrar"})})]})},e))}),s.jsx(b.Z,{color:"secondary",fullWidth:!0,startIcon:s.jsx(o,{}),sx:{mb:3,mt:1},onClick:()=>C.current?.click(),children:"Cargar imagen"}),s.jsx(x.Z,{label:"Es necesario al menos 1 imagen",color:"error",variant:"outlined",sx:{mb:1,display:q("images").length<1?"flex":"none"}}),s.jsx("input",{ref:C,type:"file",multiple:!0,accept:"image/png, image/gif, image/jpeg, image/webp",style:{display:"none"},onChange:k})]}),(0,s.jsxs)(v.Z,{display:"flex",flexDirection:"row",children:[(0,s.jsxs)(v.Z,{display:"block",flexDirection:"column",marginInlineEnd:"5px",children:[s.jsx(h.Z,{label:"Nombre",variant:"outlined",fullWidth:!0,id:"title",name:"title",autoComplete:"false",sx:{mb:1},...r("title",{required:"Se requiere el nombre del producto.",minLength:{value:2,message:"M\xednimo 2 caracteres"}}),error:!!Z.title,helperText:Z.title?.message}),s.jsx(h.Z,{label:"Slug",variant:"outlined",fullWidth:!0,value:q("slug"),id:"slug",name:"slug",autoComplete:"false",sx:{mb:1},...r("slug",{validate:e=>e.trim().includes(" ")?"No puede tener espacios en blanco":void 0}),error:!!Z.slug,helperText:Z.slug?.message}),s.jsx(h.Z,{label:"PV",variant:"outlined",fullWidth:!0,autoComplete:"false",id:"pv",name:"pv",sx:{mb:1},...r("pv",{required:"Este campo es requerido",validate:e=>e<1?"No puede ser menor a 1":void 0}),error:!!Z.pv,helperText:Z.pv?.message}),s.jsx(h.Z,{label:"BV",variant:"outlined",fullWidth:!0,autoComplete:"false",id:"bv",name:"bv",sx:{mb:1},...r("bv",{required:"Este campo es requerido",validate:e=>e<1?"No puede ser menor a 1":void 0}),error:!!Z.bv,helperText:Z.bv?.message}),s.jsx(h.Z,{label:"IBO",variant:"outlined",fullWidth:!0,autoComplete:"false",id:"ibo",name:"ibo",sx:{mb:1},...r("ibo",{required:"Este campo es requerido",validate:e=>e<1?"No puede ser menor a 1":void 0}),error:!!Z.ibo,helperText:Z.ibo?.message})]}),(0,s.jsxs)(v.Z,{display:"block",flexDirection:"column",children:[s.jsx(h.Z,{label:"Existencia",variant:"outlined",fullWidth:!0,autoComplete:"false",id:"instock",name:"instock",sx:{mb:1},...r("inStock",{required:"Este campo es requerido",validate:e=>e<0?"No puede ser menor a 0":void 0}),error:!!Z.inStock,helperText:Z.inStock?.message}),s.jsx(h.Z,{label:"Tipo",variant:"outlined",autoComplete:"false",id:"type",name:"type",fullWidth:!0,sx:{mb:1},...r("type"),error:!!Z.type}),s.jsx(h.Z,{label:"Tama\xf1o",variant:"outlined",autoComplete:"false",id:"sizes",name:"sizes",fullWidth:!0,sx:{mb:1},...r("sizes"),error:!!Z.sizes}),s.jsx(h.Z,{label:"Costo",variant:"outlined",autoComplete:"false",id:"costo",name:"costo",fullWidth:!0,sx:{mb:1},...r("costo",{required:"Este campo es requerido",validate:e=>e<0?"No puede ser menor a 0":void 0}),error:!!Z.costo,helperText:Z.costo?.message})]})]}),s.jsx(h.Z,{label:"Etiquetas",variant:"outlined",fullWidth:!0,sx:{mb:1},value:_,helperText:"Presiona [spacebar] para agregar",onChange:e=>{z(e.target.value)},onKeyDown:e=>{" "===e.key&&W(_)}}),s.jsx(v.Z,{sx:{display:"flex",flexWrap:"wrap",listStyle:"none",p:0,m:0},component:"ul",children:q("tags").map(e=>s.jsx(x.Z,{label:e,onDelete:()=>V(e),color:"primary",size:"small",sx:{ml:1,mt:1}},e))}),s.jsx(h.Z,{label:"Descripcion",variant:"outlined",autoComplete:"false",id:"description",name:"description",multiline:!0,fullWidth:!0,sx:{mb:1,mt:2},...r("description"),error:!!Z.description,helperText:Z.description?.message}),s.jsx(g.Z,{sx:{my:1}}),(0,s.jsxs)(v.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",sx:{mb:1},children:[s.jsx(b.Z,{color:"error",startIcon:s.jsx(l.Z,{}),sx:{width:"100px",height:"30px",marginInlineEnd:"20px"},type:"button",onClick:()=>D(q("_id"),q("images")),children:"Eliminar"}),s.jsx(b.Z,{color:"secondary",startIcon:s.jsx(n.Z,{}),sx:{width:"150px",height:"30px"},type:"submit",disabled:T,children:"Guardar"})]})]})})})})}},91843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(4656),i=r(17718),a=r(95153);let o=(0,a.createProxy)(String.raw`/Users/altice/RomApps/items-control/src/components/ProductForm.tsx`),{__esModule:l,$$typeof:n}=o,u=o.default;var c=r(78948);async function d({slug:e}){let t;let{data:r,statusText:i}=await (0,c.Z)(`/products/${"nuevo"===e?"":e}`);if("nuevo"!==e){if(!r&&"OK"!==i)return s.jsx(s.Fragment,{children:i});t=r}else t={_id:"",description:"",images:["img1.jpg","img2.jpg"],inStock:0,pv:0,bv:0,ibo:0,costo:0,sizes:"",slug:"",tags:["tag1","tag2"],title:"",type:"",createdAt:"",updatedAt:""};return s.jsx(u,{producto:t})}function p({params:e}){return(0,s.jsxs)(i.Box,{sx:{display:"flex",flexDirection:"column"},children:[s.jsx(i.Box,{display:"flex",children:(0,s.jsxs)(i.Typography,{color:"secondary",children:["Producto: ",e.slug]})}),s.jsx(d,{slug:e.slug})]})}},78948:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(40700);let i=s.Z.create({baseURL:"http://localhost:3000/api"}),a=i},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(31323);let i=e=>{let t=(0,s.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[271,697,700,323,79,15],()=>r(97951));module.exports=s})();